# MiniKit Integration Setup Guide

## Environment Variables Required

Create a `.env.local` file in your project root with the following variables:

```env
# Required MiniKit Environment Variables

# Your Coinbase Developer Platform API key
NEXT_PUBLIC_CDP_CLIENT_API_KEY=your_cdp_api_key_here

# Your deployed URL (must be HTTPS)
NEXT_PUBLIC_URL=https://your-app.vercel.app

# Mini App Configuration
NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME=Base Buddies
NEXT_PUBLIC_APP_SUBTITLE=Social Challenge Platform
NEXT_PUBLIC_APP_DESCRIPTION=A fun onchain app built on Base for social challenges and rewards
NEXT_PUBLIC_APP_PRIMARY_CATEGORY=Social

# App Images (must be publicly accessible via HTTPS)
NEXT_PUBLIC_APP_ICON=https://your-app.vercel.app/icon.png
NEXT_PUBLIC_APP_HERO_IMAGE=https://your-app.vercel.app/hero.png
NEXT_PUBLIC_APP_SPLASH_IMAGE=https://your-app.vercel.app/splash.png
NEXT_PUBLIC_SPLASH_BACKGROUND_COLOR=#ffffff

# Open Graph Metadata
NEXT_PUBLIC_APP_OG_TITLE=Base Buddies - Social Challenge Platform
NEXT_PUBLIC_APP_OG_DESCRIPTION=Join fun, low-stakes challenges and earn rewards on Base
NEXT_PUBLIC_APP_OG_IMAGE=https://your-app.vercel.app/og-image.png

# Farcaster Account Association (generated by CLI)
FARCASTER_HEADER=your_farcaster_header_here
FARCASTER_PAYLOAD=your_farcaster_payload_here
FARCASTER_SIGNATURE=your_farcaster_signature_here
```

## Setup Steps

### 1. Get Coinbase Developer Platform API Key
- Sign up at [Coinbase Developer Platform](https://developer.coinbase.com/)
- Create a new project
- Copy your API key

### 2. Deploy Your App
- Deploy to Vercel or another platform with HTTPS
- Update `NEXT_PUBLIC_URL` with your deployed URL

### 3. Add App Images
- Add your app images to the `public/` folder
- Update the image URLs in your environment variables
- Ensure all images are accessible via HTTPS

### 4. Generate Farcaster Manifest
Run the following command to generate account association credentials:

```bash
npx create-onchain --manifest
```

**Important**: Use your Farcaster custody wallet for this step. You can import this wallet using the recovery phrase found in Farcaster under Settings → Advanced → Farcaster recovery phrase.

The CLI will:
- Connect your Farcaster custody wallet
- Add your deployed URL
- Sign the manifest to generate association credentials
- Automatically update your local `.env.local` file

### 5. Update Deployment Environment Variables
After running the manifest command, update your deployment platform's environment variables with the generated `FARCASTER_HEADER`, `FARCASTER_PAYLOAD`, and `FARCASTER_SIGNATURE` values.

### 6. Test Your Integration
- Visit `https://yourdomain.com/.well-known/farcaster.json` to ensure it returns valid JSON
- Test wallet connection in your app
- Share your Mini App URL in Farcaster to test functionality

## Features Added

✅ **MiniKit Provider**: Wraps your app with MiniKit context
✅ **Wallet Connection**: Real wallet connection with Farcaster integration
✅ **Frame Ready State**: Proper initialization for Mini App display
✅ **Farcaster Manifest**: Metadata endpoint for Mini App discovery
✅ **Updated UI**: Removed hardcoded user data, added real wallet connection

## Next Steps

1. **Test thoroughly** - Share your Mini App URL in Farcaster and test all functionality
2. **Monitor and iterate** - Use analytics to understand user interactions
3. **Explore advanced features** - Consider adding notifications, authentication, or other MiniKit hooks

## Available MiniKit Hooks

- `useNotification` - Send in-app and push notifications
- `useAddFrame` - Allow users to save your mini app
- `useClose` - Programmatically close the mini app frame
- `useOpenUrl` - Open external URLs from within the frame
- `usePrimaryButton` - Configure and handle primary button interactions
- `useViewProfile` - Navigate users to Farcaster profiles
- `useAuthenticate` - Handle Farcaster authentication flows

## Troubleshooting

- Ensure all environment variables are set correctly
- Verify all image URLs are accessible via HTTPS
- Check that your app is deployed and publicly accessible
- Test the `.well-known/farcaster.json` endpoint returns valid JSON
- Make sure you're using your Farcaster custody wallet for manifest generation 